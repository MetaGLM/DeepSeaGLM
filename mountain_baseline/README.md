## 性能表现

- **得分**：45.47
- **运行时间**：约6分钟
- **Tokens消耗**：约180万
- **Author**：乌蒙山连着山外山

---

## 项目简介

本项目是一个简易的智能问答系统，主要利用GLM函数调用功能，针对用户提供的问题进行基础查询、分析和应答。它支持简单的逻辑处理，并能通过内置函数完成基本的计算或数据提取任务。

---

### 主要特点：

1. **数据预处理与模型预测：**
    - 对于输入数据进行预处理，系统采用数学模型对正常数据进行状态预测标记。这样，系统能够准确分析和分类数据，并输出预测结果。
    - 针对存在噪声的数据，通过少样本学习和提示词，结合大语言模型（LLM）进行状态标记和预测，从而有效应对复杂和不确定的数据环境。

2. **简洁高效的API设计：**
    - 系统设计了几个简洁的API接口，能够高效地完成各类查询任务。用户通过这些API，可以轻松访问数据表，快速获得所需答案。

3. **GLM函数调用功能：**
    - 通过GLM函数调用，系统能够实现快速、精确的自然语言理解与处理。此功能的集成使得系统能够在用户提出问题时，结合已有数据进行即时分析，并提供对应的解决方案。
    - 因时间仓促，当前方案未集成agent（智能代理），在多步骤问题中的应答能力弱。

## 运行环境

### 依赖

以下是运行本项目所需的主要依赖项：

- Python 3.8+
- pandas
- os
- json
- zhipuai（智谱AI接口）
- tools（自定义工具模块）
- api_1（API功能模块）

建议安装所有依赖项后运行程序
---

## 启动方式

有两种运行方式：

### 1. 直接运行 Python 脚本

运行以下命令：

```bash
python run.py
```

### 2. 使用 Jupyter Notebook

运行 `ai_brain_v2.ipynb` 文件，逐步执行代码块。

---

## 功能说明

### 功能模块

- **问题解析**：通过自然语言理解，提取问题中的关键信息，结合数据表和API进行分析。
- **工具调用**：根据问题内容自动选择合适的工具或API。
- **数据处理**：对大规模CSV和Excel数据进行预处理、清洗和合并。
- **模型调用**：通过智谱AI提供的GLM-4模型进行对话式推理，生成最终答案。

### 主要应用场景

- **能耗计算**：设备或系统的总能耗、运行能耗等问题的计算。
- **动作检测**：设备的状态（开机、关机、动作细节等）分析。
- **数据注释**：自动为数据表生成字段注释，便于理解。
- **时长计算**：统计设备的运行时长、开机时长等。

---

## 问答逻辑示例

### 输入示例

用户提问：

```
2024/8/23 上午折臂吊车的总能耗是多少（单位化成kWh，保留2位小数）？
```

### 输出示例

程序返回答案：

```
折臂吊车的总能耗为 X.XX kWh。
```

---

## 数据说明

### 输入数据

输入数据保存在 `下载data/初赛数据1231/` 文件夹下，包括：

1. **设备数据表**：如 `设备参数详情.xlsx`。
2. **设备运行记录**：如 `初赛数据` 文件夹中的多个 CSV 文件。
3. **字段释义表**：如 `字段释义.csv`，用于生成字段注释。

### 输出数据

所有生成的中间数据和结果数据均保存在以下文件夹中：

1. `导入数据库数据/`：处理后的数据文件。
2. `data/`：临时数据文件。

### 注释文件

生成的字段注释存储在 `dict_2.json` 中，记录了所有数据表的字段注释信息。

---

## 目录结构

```

├── db/                         # 处理后的数据表
├── data/                       # 数据处理的中间结果
├── 下载data/初赛数据1231/        # 原始数据文件
├── run.py                      # 主运行脚本
├── dict.json                   # 字段注释文件
├── tools.py                    # 工具模块
├── api.py                      # 自定义 API 功能模块
├── optimize_pre_data.py        # 数据预处理脚本
└── README.md                   # 项目说明文件
```

## 快速开始

1. 创建虚拟环境并安装依赖文件:
```shell
P
```

```bash
python run.py
```

输出结果：

```
所有文件夹均已存在。不再重新预处理数据。
需要预处理数据，请删除文件夹后重新运行。
Question: 2024/8/23 上午折臂吊车的总能耗是多少（单位化成kWh，保留2位小数）？
Answer: 折臂吊车的总能耗为 42.27 kWh。
列表已成功存入 dict_2.json 文件
```

---

## 反馈与问题

如果在运行过程中遇到问题或需要帮助，请联系开发团队。

author:乌蒙山连着山外山